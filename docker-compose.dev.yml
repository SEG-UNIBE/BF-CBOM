services:
  api:
    build:
      context: .
      dockerfile: Dockerfile
    volumes:
      - ./src:/app/src
      - ./logs:/app/logs
    environment:
      - ENV=development
      - DEBUG=true
    command: ["uv", "run", "uvicorn", "bf_cbom.server:app", "--host", "0.0.0.0", "--port", "8000", "--reload"]
    
  worker:
    build:
      context: .
      dockerfile: Dockerfile
    volumes:
      - ./src:/app/src
      - ./data:/app/data
      - ./logs:/app/logs
    environment:
      - ENV=development
      - DEBUG=true